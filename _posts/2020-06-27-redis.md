---
layout: page
title: 关于redis的一些问题
---

### redis一般被用于？
会话缓存、全页缓存、消息队列、订阅、投票

### redis有哪些好处？
* 速度快
* 单线程消除锁的开销
* 数据类型多
* 支持事务、操作原子性
* 支持分布式、读写分离

### 为什么redis这么快？

### redis有哪些数据类型？
string、list、set、sorted set、hash

### redis是怎么做持久化的？
* RDB：在不同的时间点对于数据进行存储
* AOF：将所有写指令记录下来，运行一遍

### redis如何实现高可用？
有主备方式和主从方式。

**主备方式**是指一台主机多台备机。正常情况下主机对外提供服务，并把数据同步到备机。主机备机共享一个IP，如果主机死了，备机通过虚拟IP顶上。优点是对于客户端是黑箱，缺点是浪费资源

**主从方式**是指一主多从方式，主从之间进行数据同步。第一，当主机死了，通过选举算法（Paxos，Raft）从slave中选举出新的Master，主机恢复后以slave的身份加入。第二，可以实现读写分离。主机负责写操作，多余请求通过均衡负载算法分流到各个slave上。问题在于IP会改变。

### redis之间如何实现数据同步？
有同步和异步两种方式。结果对应强一致性和弱一致性。

**同步**是等待从机写入成功后，主机才返回成功信号。

**异步**是接收到写操作之后直接返回成功。后台异步写入从机。

redis中**主从同步**采用**异步**方式，这种弱一致性详解在CAP原理和一致性模型。

### redis集群有什么玩法？
客户端分片、twemproxy、codis、cluster、哨兵

### 通过代理访问服务器进行读写有什么好处？
* 避免对于Redis服务器的直接访问
* 可以在代理着一层做限流、授权和分片
* 避免客户端臃肿的逻辑代码
* 无状态、可以扩展任意节点

### 什么是缓存击穿？
查询一个不存在的数据，直接访问数据库，查不到数据，不写入缓存。每次查这个不存在的数据都要到数据库里去查，造成缓存击穿。

可以通过将空值放置在缓存中解决。

### 什么是缓存雪崩？
数据没有加载到缓存中，或者缓存在同一时间大面积失效。（双十一结束之后）导致所有的请求都去查数据库。

要预防缓存雪崩，可以从四个方面：
* 高可用设计（Sentinel、cluster都实现了高可用）
* 缓存降级
* 数据备份和快速预热（手工操作）
* 提前演练